<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RideKada - Home</title>
  <link rel="stylesheet" href="css/home.css">
  <style>
    /* Visual cue for fixed input */
    .fixed-input {
      background-color: #f0f0f0 !important;
      color: #333 !important;
      font-weight: 500;
      cursor: not-allowed;
    }

    /* Announcements Banner */
    .announcements-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px 50px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      animation: slideDown 0.4s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .announcements-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }

    .announcements-header {
      background: linear-gradient(135deg, #5dade2, #3498db);
      color: white;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .announcement-icon {
      font-size: 24px;
    }

    .announcements-header h3 {
      flex: 1;
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }

    .close-announcements {
      background: transparent;
      border: none;
      color: white;
      font-size: 32px;
      cursor: pointer;
      line-height: 1;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.3s;
    }

    .close-announcements:hover {
      background: rgba(255,255,255,0.2);
    }

    .announcements-content {
      max-height: 400px;
      overflow-y: auto;
    }

    .announcement-item {
      padding: 20px;
      border-bottom: 1px solid #e0e0e0;
      transition: background 0.2s;
    }

    .announcement-item:last-child {
      border-bottom: none;
    }

    .announcement-item:hover {
      background: #f8f9fa;
    }

    .announcement-title {
      font-size: 16px;
      font-weight: 700;
      color: #111a20;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .announcement-date {
      font-size: 12px;
      color: #999;
      font-weight: 400;
    }

    .announcement-message {
      font-size: 14px;
      line-height: 1.6;
      color: #555;
      margin: 0;
      white-space: pre-wrap;
    }

    .no-announcements {
      padding: 40px 20px;
      text-align: center;
      color: #999;
      font-size: 14px;
    }

    /* My Bookings Button Style */
    .bookings-btn {
      background: linear-gradient(135deg, #2ecc71, #27ae60);
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .bookings-btn:hover {
      background: linear-gradient(135deg, #27ae60, #229954);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .announcements-banner {
        padding: 15px 20px;
      }
      
      .announcement-title {
        flex-direction: column;
        align-items: flex-start;
        gap: 5px;
      }

      .user-section {
        flex-wrap: wrap;
        gap: 10px;
      }
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="navbar">
  <div class="logo-section">
    <img src="media/logo.png" alt="RideKada Logo" class="logo-circle">
    <span class="brand-name">RideKada</span>
  </div>

    <div class="user-section">
      <!-- My Bookings Button -->
      <button class="bookings-btn" onclick="window.location.href='my_bookings.html'">
        üìã My Bookings
      </button>

  

      <!-- PROFILE BUTTON + DROPDOWN -->
      <div class="profile-wrapper">
        <div id="userIcon" class="user-icon">üë§</div>

        <div id="profileDropdown" class="profile-dropdown">
          <a href="profile.html" class="dropdown-item">View Profile</a>
          <a href="#" id="logoutLink" class="dropdown-item">Logout</a>
        </div>
      </div>
    </div>
  </nav>

<!-- Banner Section -->
<div class="banner">
  <img src="media/mtrd.jpg" alt="Banner Image">
</div>

  <!-- Announcements Section -->
  <div class="announcements-banner" id="announcementsBanner" style="display: none;">
    <div class="announcements-container">
      <div class="announcements-header">
        <span class="announcement-icon">üì¢</span>
        <h3>Announcements</h3>
        <button class="close-announcements" onclick="closeAnnouncements()">√ó</button>
      </div>
      <div class="announcements-content" id="announcementsContent">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <form action="php/driver_search.php" method="POST" class="search-container">
      
      <input type="text"
             class="search-input fixed-input"
             name="fromLocation"
             value="Maryheights"
             readonly
             title="Origin is fixed to Maryheights">

      <!-- Going To -->
      <input type="text"
             id="goingTo"
             class="search-input"
             name="goingTo"
             placeholder="Going to"
             required>

      <!-- Date (Auto-filled with today) -->
      <input type="date"
             id="calendar"
             class="search-input"
             name="calendar"
             required>

      <!-- Passenger Count -->
      <input type="number"
             id="passengerCount"
             class="search-input"
             name="passengerCount"
             placeholder="Passenger Count"
             min="1"
             max="10"
             required>

      <!-- Search Button -->
      <button type="submit" class="search-btn">SEARCH</button>
    </form>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="content-left">
      <h2>Start at Campus. Arrive Anywhere. Commute Lighter.‚≠ê</h2>
      <div class="info-cards">
        <div class="info-card">
          <h3>Why Carpooling Matters</h3>
          <p>Carpooling helps minimize fuel expenses, reduces the number of vehicles on the road, and promotes a cleaner environment. For students and professionals, it's also a great way to save time and build connections with people who travel the same routes every day.</p>
        </div>
        <div class="info-card">
          <h3>How Our Platform Helps</h3>
          <p>Our app makes it easy to find or offer rides safely and conveniently. Users can browse available trips, schedule carpools, and communicate with drivers or passengers‚Äîcreating a smooth and secure ride-sharing experience for everyone.</p>
        </div>
      </div>
    </div>
<div class="content-right">
  <div class="ride-card">
    <div class="car-icon">üöó</div>
    <div class="ride-title">Safe and Reliable Trips</div>
    <p class="ride-description">Your safety matters. Our app prioritizes verified users, transparent trip details, and secure communication to ensure every ride is trustworthy and hassle-free.</p>
  </div>
</div>
  </div>

  <!-- About Section -->
  <div class="about-section">
    <div class="about-container">
      <img src="media/logo.png" alt="RideKada Logo" class="about-logo">
      <div class="about-content">
        <h3>About</h3>
        <p>We are a group of students from Saint Louis University who developed this carpooling app as part of our mission to help improve daily commuting. Inspired by the challenges students face when traveling to and from campus, we built a platform that offers cost-efficient, eco-friendly, and convenient ride sharing. Through this project, we aim to apply what we've learned and create a meaningful solution that benefits our community.</p>
      </div>
    </div>
  </div>

  <!-- Team Section -->
<div class="team-section">
  <div class="team-container">
    <h2 class="team-title">Our Team</h2>
    <div class="team-grid">
      <div class="team-member">
        <img src="media/buh.jpg" alt="Bernales" class="member-avatar">
        <div class="member-name">Bernales</div>
      </div>
      <div class="team-member">
        <img src="media/buh.jpg" alt="Dominguez" class="member-avatar">
        <div class="member-name">Dominguez</div>
      </div>
      <div class="team-member">
        <img src="media/buh.jpg" alt="Fernandez" class="member-avatar">
        <div class="member-name">Fernandez</div>
      </div>
    </div>
    <div class="team-grid">
      <div class="team-member">
        <img src="media/buh.jpg" alt="Fortes" class="member-avatar">
        <div class="member-name">Fortes</div>
      </div>
      <div class="team-member">
        <img src="media/buh.jpg" alt="Ilagan" class="member-avatar">
        <div class="member-name">Ilagan</div>
      </div>
      <div class="team-member">
        <img src="media/buh.jpg" alt="Misagal" class="member-avatar">
        <div class="member-name">Misagal</div>
      </div>
    </div>
  </div>
</div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-left">
        <h4>RideKada</h4>
        <p>¬© 2025 RideKada. NEXUS. All Rights Reserved.</p>
      </div>
      <div class="footer-right">
        <h4>Links</h4>
        <ul class="footer-links">
          <li><a href="#">Links</a></li>
          <li><a href="#">Links</a></li>
          <li><a href="#">Links</a></li>
          <li><a href="#">Links</a></li>
          <li><a href="#">Links</a></li>
          <li><a href="#">Links</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script src="javascript/home.js" defer></script>
  <script>
    // Announcement functions
    async function loadAnnouncements() {
      try {
        const response = await fetch('php/get_announcements.php');
        const data = await response.json();
        
        if (data.success && data.announcements.length > 0) {
          displayAnnouncements(data.announcements);
        }
      } catch (error) {
        console.error('Failed to load announcements:', error);
      }
    }

    function displayAnnouncements(announcements) {
      const banner = document.getElementById('announcementsBanner');
      const content = document.getElementById('announcementsContent');
      
      if (announcements.length === 0) {
        content.innerHTML = '<div class="no-announcements">No announcements at this time.</div>';
      } else {
        content.innerHTML = announcements.map(announcement => {
          const date = new Date(announcement.date);
          const formattedDate = date.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          return `
            <div class="announcement-item">
              <div class="announcement-title">
                <span>${announcement.title}</span>
                <span class="announcement-date">${formattedDate}</span>
              </div>
              <p class="announcement-message">${announcement.message}</p>
            </div>
          `;
        }).join('');
      }
      
      // Show the banner if user hasn't closed it in this session
      if (sessionStorage.getItem('announcementsClosed') !== 'true') {
        banner.style.display = 'block';
      }
    }

    function closeAnnouncements() {
      const banner = document.getElementById('announcementsBanner');
      banner.style.display = 'none';
      sessionStorage.setItem('announcementsClosed', 'true');
    }

    // Load announcements when page loads
    document.addEventListener('DOMContentLoaded', () => {
      loadAnnouncements();
    });
  </script>
</body>
</html>